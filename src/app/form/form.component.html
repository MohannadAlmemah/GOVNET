<div class="overlay-wrapper" *ngIf="isLoading">
    <p-progressSpinner></p-progressSpinner>
</div>

<main id="content" role="main" class="main">
    <div class="content container">
        <div dir="rtl">
            <nav aria-label="breadcrumb">
                <ol id="w6" class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/Investment/Dashboard">الرئيسية</a></li>
                    <!-- <li class="breadcrumb-item"><a href="/ar/services/sub?id=12">التسجيل والترخيص</a></li> -->
                    <li class="breadcrumb-item active" aria-current="page">{{serviceName}}</li>
                </ol>
            </nav>
        </div>
        <div class="row justify-content-center py-7" style="background:url(/img/bg-green-full.png);">
            <div class="col-md-8 col-12">

                <div class="js-step-form" data-hs-step-form-options="{
            &quot;progressSelector&quot;: &quot;#basicStepFormProgress&quot;,
            &quot;stepsSelector&quot;: &quot;#basicStepFormContent&quot;,
            &quot;endSelector&quot;: &quot;#createProjectFinishBtn&quot;
          }">

                    <ul id="basicStepFormProgress" dir="rtl"
                        class="js-step-progress step step-sm step-icon-sm step-inline step-item-between mb-7">
                        <li class="step-item" [ngClass]="showStep=='1'?'active focus':null">
                            <a class="step-content-wrapper" href="javascript:;" data-hs-step-form-next-options="{
              &quot;targetSelector&quot;: &quot;#basicStepDetails&quot;
            }">
                                <span class="step-icon step-icon-soft-dark">1</span>
                                <div class="step-content">
                                    <span class="step-title">معلومات عامة</span>
                                </div>
                            </a>
                        </li>
                        <li class="step-item" [ngClass]="showStep=='2'?'active focus':null">
                            <a class="step-content-wrapper" href="javascript:;" data-hs-step-form-next-options="{
               &quot;targetSelector&quot;: &quot;#basicStepTerms&quot;
             }">
                                <span class="step-icon step-icon-soft-dark">2</span>
                                <div class="step-content">
                                    <span class="step-title">تقديم الطلب</span>
                                </div>
                            </a>
                        </li>
                    </ul>


                    <div id="basicStepFormContent">
                        <div id="basicStepDetails" class="card" [ngClass]="showStep=='1'?'active':null" [ngStyle]="showStep=='2'? {'display':'none'} :null ">
                            <div dir="rtl">
                                <div class="card-header">
                                    <h3 class="card-title h3">{{serviceName}}</h3>
                                </div>

                                <div class="card-body">
                                    <div class="mb-5">
                                        <span [innerHTML]="serviceCard?.description">
                                            
                                        </span>
                                    </div>
                                    <div class="d-flex justify-content-center">
                                        <button type="button" class="btn btn-primary" (click)="goStep2()">
                                            تقديم <i class="bi-chevron-left small"></i> </button>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div id="basicStepTerms" class="card active" [ngStyle]="showStep=='1'? {'display':'none'} :null ">
                            <div dir="rtl">
                                <div class="card-header">
                                    <h3 class="card-title h3">{{serviceName}}</h3>
                                </div>

                                <div class="card-body">

                                    <form id="service-form" [formGroup]="myForm">

                                        <ng-container *ngFor="let field of fields">

                                            <ng-container *ngIf="field.type=='FILE'">

                                                <div class="row mb-4" [hidden]="field.hidden">

                                                    <label class="col-sm-2 col-form-label form-label">
                                                        {{field.label}}
                                                        <span class="text-danger" *ngIf="field.required"> * </span>
                                                    </label>

                                                    <div class="col-sm-10">

                                                        <table
                                                            class="multiple-input-list table table-condensed table-renderer">
                                                            <tbody>
                                                                <tr class="multiple-input-list__item" data-index="0">

                                                                    <td
                                                                        class="list-cell__environmental_exsits_approval_file">

                                                                        <div
                                                                            class="field-dynamicmodel-environmental_exsits_approval_file-0 form-group">

                                                                            <input formControlName="{{field.id}}"
                                                                                [ngClass]="myForm.get(field.id)?.invalid && submitted ? 'is-invalid':null"
                                                                                [multiple]="field.multiSelect"
                                                                                class="form-control" type="file"
                                                                                (change)="onUploadFile(field.id,$event,field.multiSelect!)"
                                                                                [required]="field.required && getFiles(field.id).length==0">

                                                                            <p class="pt-1"
                                                                                style="font-size: 13px !important;"
                                                                                *ngIf="field?.description">
                                                                                {{field?.description??""}}
                                                                            </p>

                                                                            <p class="pt-1 text-danger"
                                                                                style="font-size: 13px !important;"
                                                                                *ngIf="yourTurn && field?.approved == false">
                                                                                {{field?.comment??""}}
                                                                            </p>



                                                                            <div
                                                                                *ngIf="myForm.get(field.id)?.invalid && submitted">
                                                                                <span class="text-danger"
                                                                                    *ngIf="myForm.get(field.id)?.errors?.['required']">
                                                                                    حقل اجباري !
                                                                                </span>
                                                                            </div>
                                                                        </div>



                                                                        <table class="table text-center my-3"
                                                                            *ngIf="getFiles(field.id).length>0">
                                                                            <thead class="thead-light">
                                                                                <tr>
                                                                                    <th>اسم الملف</th>
                                                                                    <th>حذف</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>

                                                                                <tr
                                                                                    *ngFor="let item of getFiles(field.id)">
                                                                                    <td>{{field.label}}</td>
                                                                                    <td>
                                                                                        <i role="button"
                                                                                            (click)="deleteFile(item.id)"
                                                                                            class="fa-solid fa-trash text-danger"></i>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>

                                                                        <br>

                                                                    </td>
                                                                    <td class="list-cell__button"></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>




                                                    </div>
                                                </div>

                                            </ng-container>

                                            <ng-container *ngIf="field.type=='WEBVIEW'">
                                                <div class="row mb-4" [hidden]="field.hidden">

                                                    <div class="col-4">

                                                        <a href="{{field.url}}" target="_blank">
                                                            {{field.label}}
                                                        </a>

                                                    </div>

                                                </div>
                                            </ng-container>

                                            <ng-container *ngIf="field.type=='TEXT_VIEW'">

                                                <app-text-view [formGroup]="myForm"
                                                [errors]="getFormControlErrors(field.id)"
                                                [isInvalid]="getFormControlValidation(field.id)" [field]="field"
                                                [fieldId]="field.id" [submitted]="submitted" [yourTurn]="yourTurn"
                                                (refreshFormEvent)="refreshForm2($event)" [value]="myForm.get(field.id)?.value"></app-text-view>

                                            
                                            </ng-container>

                                            <ng-container *ngIf="field.type=='EFAWATEERCOM'">

                                                <label class="col-sm-12 col-form-label form-label mb-2">
                                                    {{field.label}}
                                                </label>

                                                <ng-container *ngFor="let ef_field of field.fields">

                                                    <ng-container *ngIf="ef_field.type=='TEXT_VIEW'">

                                                        <app-text-view [formGroup]="myForm"
                                                        [errors]="getFormControlErrors(ef_field.id)"
                                                        [isInvalid]="getFormControlValidation(ef_field.id)" [field]="ef_field"
                                                        [fieldId]="ef_field.id" [submitted]="submitted" [yourTurn]="yourTurn"
                                                        (refreshFormEvent)="refreshForm2($event)"
                                                        [value]="myForm.get(ef_field.id)?.value"></app-text-view>

                                                        <!-- <div class="row mb-4 align-items-center" [hidden]="ef_field.hidden">

                                                            <label class="col-sm-2 col-form-label form-label">
                                                                {{ef_field.label}}
                                                            </label>

                                                            <div class="col-sm-10">

                                                                <label>
                                                                    {{myForm.get(ef_field.id)?.value}}
                                                                </label>

                                                            </div>
                                                        </div> -->

                                                    </ng-container>

                                                </ng-container>

                                            </ng-container>

                                            <ng-container *ngIf="field.type=='TEXT_FIELD'">


                                                <app-text-field [formGroup]="myForm"
                                                    [errors]="getFormControlErrors(field.id)"
                                                    [isInvalid]="getFormControlValidation(field.id)" [field]="field"
                                                    [fieldId]="field.id" [submitted]="submitted" [yourTurn]="yourTurn"
                                                    (refreshFormEvent)="refreshForm2($event)"></app-text-field>

                                                <!-- <div class="row mb-4" [hidden]="field.hidden">

                                                    <label class="col-sm-2 col-form-label form-label">
                                                        {{field.label}}
                                                        <span class="text-danger" *ngIf="field.required"> * </span>
                                                    </label>

                                                    <div class="col-sm-10">

                                                        
                                                        <input class="form-control" [readOnly]="!field.editable" [ngClass]="myForm.get(field.id)?.invalid && submitted ? 'is-invalid':null"  formControlName="{{field.id}}" [type]="getTextFieldType(field.textFieldType!)" [required]="field.required && !field.hidden!" (blur)="refreshForm(field.id,field.shouldRefresh)">
                                                        
                                                        <p class="pt-1" style="font-size: 13px !important;" *ngIf="field?.description">
                                                            {{field?.description??""}}
                                                        </p>

                                                        <p class="pt-1 text-danger" style="font-size: 13px !important;" *ngIf="yourTurn && field?.approved == false">
                                                            {{field?.comment??""}}
                                                        </p>

                                                        <div *ngIf="myForm.get(field.id)?.invalid && submitted">
                                                            <span class="text-danger"
                                                                *ngIf="myForm.get(field.id)?.errors?.['required']">
                                                                حقل اجباري !
                                                            </span>
                                                        </div>
                                                    </div>


                                                </div> -->

                                            </ng-container>


                                            <ng-container *ngIf="field.type=='TEXT_FIELD_PHONE'">

                                                <app-text-field-phone [formGroup]="myForm"
                                                    [errors]="getFormControlErrors(field.id)"
                                                    [isInvalid]="getFormControlValidation(field.id)" [field]="field"
                                                    [fieldId]="field.id" [submitted]="submitted" [yourTurn]="yourTurn"
                                                    (refreshFormEvent)="refreshForm2($event)"></app-text-field-phone>

                                                <!-- <div class="row mb-4" [hidden]="field.hidden">

                                                    <label class="col-sm-2 col-form-label form-label">
                                                        {{field.label}}
                                                        <span class="text-danger" *ngIf="field.required"> * </span>
                                                    </label>

                                                    <div class="col-sm-10">


                                                        <input class="form-control"
                                                            [ngClass]="myForm.get(field.id)?.invalid && submitted ? 'is-invalid':null"
                                                            formControlName="{{field.id}}" [readOnly]="!field.editable"
                                                            type="text" [required]="field.required && !field.hidden!">

                                                        <p class="pt-1" style="font-size: 13px !important;"
                                                            *ngIf="field?.description">
                                                            {{field?.description??""}}
                                                        </p>

                                                        <p class="pt-1 text-danger" style="font-size: 13px !important;"
                                                            *ngIf="yourTurn && field?.approved == false">
                                                            {{field?.comment??""}}
                                                        </p>

                                                        <div *ngIf="myForm.get(field.id)?.invalid && submitted">
                                                            <span class="text-danger"
                                                                *ngIf="myForm.get(field.id)?.errors?.['required']">
                                                                حقل اجباري !
                                                            </span>
                                                        </div>
                                                    </div>


                                                </div> -->

                                            </ng-container>


                                            <ng-container *ngIf="field.type=='COMBO_BOX'">

                                                <app-combo-box [formGroup]="myForm"
                                                    [errors]="getFormControlErrors(field.id)"
                                                    [isInvalid]="getFormControlValidation(field.id)" [field]="field"
                                                    [fieldId]="field.id" [submitted]="submitted" [yourTurn]="yourTurn"
                                                    (refreshFormEvent)="refreshForm2($event)"></app-combo-box>


                                            </ng-container>

                                            <ng-container *ngIf="field.type=='MULTI_COMBO_BOX'">

                                                <app-multi-select [formGroup]="myForm"
                                                    [errors]="getFormControlErrors(field.id)"
                                                    [isInvalid]="getFormControlValidation(field.id)" [field]="field"
                                                    [fieldId]="field.id" [submitted]="submitted" [yourTurn]="yourTurn"
                                                    (refreshFormEvent)="refreshForm2($event)"></app-multi-select>

                                            </ng-container>


                                            <ng-container *ngIf="field.type=='PREDEFINED_COMBO_BOX'">

                                                <app-predefined-combo-box [formGroup]="myForm"
                                                    [errors]="getFormControlErrors(field.id)"
                                                    [isInvalid]="getFormControlValidation(field.id)" [field]="field"
                                                    [fieldId]="field.id" [submitted]="submitted" [yourTurn]="yourTurn"
                                                    (refreshFormEvent)="refreshForm2($event)"></app-predefined-combo-box>

                                            </ng-container>

                                            <ng-container *ngIf="field.type=='CHECKBOX'">

                                                <app-checkbox [formGroup]="myForm"
                                                    [errors]="getFormControlErrors(field.id)"
                                                    [isInvalid]="getFormControlValidation(field.id)" [field]="field"
                                                    [fieldId]="field.id" [submitted]="submitted" [yourTurn]="yourTurn"
                                                    (refreshFormEvent)="refreshForm2($event)"></app-checkbox>



                                            </ng-container>

                                            <ng-container *ngIf="field.type=='CONTAINER'">

                                                <div [hidden]="field.hidden">

                                                    <div class=" card px-2" *ngIf="field.designType!='TABLE'">


                                                        <div class=" row">


                                                            <div class="col-md-12 col-12">
                                                                <div class="solution_card">

                                                                    <h4 class="text-center mt-2">{{field.label}}</h4>

                                                                    <div>
                                                                        <ng-container
                                                                            *ngFor="let container of GetContainerItems(field.id)">

                                                                            <div class="col-12"
                                                                                style="text-align: left;"
                                                                                *ngIf="container.index!=1 && field.modifiable">
                                                                                <i role="button"
                                                                                    (click)="deleteContainer(container.index,container.containerId)"
                                                                                    class="fa-solid fa-trash text-danger p-2"
                                                                                    style="padding: 7px;border: 2px solid #eee;border-radius: 5px;"></i>
                                                                            </div>

                                                                            <ng-container
                                                                                *ngFor="let containerFiled of container.containerFields">


                                                                                <ng-container
                                                                                    *ngIf="containerFiled.type=='TEXT_FIELD_PHONE'">

                                                                                    <app-text-field-phone
                                                                                        [formGroup]="myForm"
                                                                                        [errors]="getFormControlErrors(containerFiled.id+'#'+container.index)"
                                                                                        [isInvalid]="getFormControlValidation(containerFiled.id+'#'+container.index)"
                                                                                        [field]="containerFiled"
                                                                                        [fieldId]="containerFiled.id+'#'+container.index"
                                                                                        [submitted]="submitted"
                                                                                        [yourTurn]="yourTurn"
                                                                                        (refreshFormEvent)="refreshForm2($event)"></app-text-field-phone>


                                                                                    <!-- <div class="row mb-4"
                                                                                        [hidden]="containerFiled.hidden">

                                                                                        <label
                                                                                            class="col-sm-2 col-form-label form-label">
                                                                                            {{containerFiled.label}}
                                                                                            <span class="text-danger"
                                                                                                *ngIf="containerFiled.required">
                                                                                                * </span>
                                                                                        </label>

                                                                                        <div class="col-sm-10">


                                                                                            <input class="form-control"
                                                                                                [ngClass]="myForm.get(containerFiled.id)?.invalid && submitted ? 'is-invalid':null"
                                                                                                formControlName="{{containerFiled.id}}#{{container.index}}"
                                                                                                [readOnly]="!containerFiled.editable"
                                                                                                type="text"
                                                                                                [required]="containerFiled.required && !containerFiled.hidden!">

                                                                                            <p class="pt-1"
                                                                                                style="font-size: 13px !important;"
                                                                                                *ngIf="containerFiled?.description">
                                                                                                {{containerFiled?.description??""}}
                                                                                            </p>

                                                                                            <p class="pt-1 text-danger"
                                                                                                style="font-size: 13px !important;"
                                                                                                *ngIf="yourTurn && containerFiled?.approved == false">
                                                                                                {{containerFiled?.comment??""}}
                                                                                            </p>

                                                                                            <div
                                                                                                *ngIf='myForm.get(containerFiled.id +"#" + container.index)?.invalid && submitted'>
                                                                                                <span
                                                                                                    class="text-danger"
                                                                                                    *ngIf='myForm.get(containerFiled.id +"#" + container.index)?.errors?.["required"]'>
                                                                                                    حقل اجباري !
                                                                                                </span>
                                                                                            </div>
                                                                                        </div>


                                                                                    </div> -->

                                                                                </ng-container>

                                                                                <ng-container
                                                                                    *ngIf="containerFiled.type=='TEXT_FIELD'">

                                                                                    <app-text-field [formGroup]="myForm"
                                                                                        [errors]="getFormControlErrors(containerFiled.id+'#'+container.index)"
                                                                                        [isInvalid]="getFormControlValidation(containerFiled.id+'#'+container.index)"
                                                                                        [field]="containerFiled"
                                                                                        [fieldId]="containerFiled.id+'#'+container.index"
                                                                                        [submitted]="submitted"
                                                                                        [yourTurn]="yourTurn"
                                                                                        (refreshFormEvent)="refreshForm2($event)"></app-text-field>

                                                                                    <!-- <div class="form-group col-md-12 col-12 py-2">
                                                                                        <p  class="col-form-label">{{containerFiled.label}}</p>
                                                                                        <span class="text-danger" *ngIf="containerFiled.required && !field.hidden!"> * </span>
                                                           
                                                                                        <input class="form-control" [ngClass]="myForm.get(containerFiled.id)?.invalid && submitted ? 'is-invalid':null" formControlName="{{containerFiled.id}}#{{container.index}}"   type="{{getTextFieldType(containerFiled.textFieldType!)}}" [required]="containerFiled.required && !field.hidden!" [readOnly]="!containerFiled.editable">
                                                                                        <div *ngIf='myForm.get(containerFiled.id +"#" + container.index)?.invalid && submitted'>
                                                                                            <span class="text-danger" *ngIf='myForm.get(containerFiled.id +"#" + container.index)?.errors?.["required"]'>
                                                                                                حقل اجباري !
                                                                                            </span>
                                                                                        </div>
                                                                                    </div> -->


                                                                                </ng-container>

                                                                                <ng-container
                                                                                    *ngIf="containerFiled.type=='CHECKBOX'">

                                                                                    <app-checkbox [formGroup]="myForm"
                                                                                        [errors]="getFormControlErrors(containerFiled.id+'#'+container.index)"
                                                                                        [isInvalid]="getFormControlValidation(containerFiled.id+'#'+container.index)"
                                                                                        [field]="containerFiled"
                                                                                        [fieldId]="containerFiled.id+'#'+container.index"
                                                                                        [submitted]="submitted"
                                                                                        [yourTurn]="yourTurn"
                                                                                        (refreshFormEvent)="refreshForm2($event)"></app-checkbox>


                                                                                    <!-- <div
                                                                                        class="form-group col-md-12 col-12 py-2">

                                                                                        <p-checkbox
                                                                                            formControlName="{{containerFiled.id}}#{{container.index}}"
                                                                                            [binary]="true"></p-checkbox>
                                                                                        <label
                                                                                            class="mx-2">{{containerFiled.label}}</label>
                                                                                        <span class="text-danger"
                                                                                            *ngIf="containerFiled.required && !field.hidden!">
                                                                                            * </span>
                                                                                    </div> -->

                                                                                </ng-container>


                                                                                <ng-container
                                                                                    *ngIf="containerFiled.type=='COMBO_BOX'">


                                                                                    <app-combo-box [formGroup]="myForm"
                                                                                        [errors]="getFormControlErrors(containerFiled.id+'#'+container.index)"
                                                                                        [isInvalid]="getFormControlValidation(containerFiled.id+'#'+container.index)"
                                                                                        [field]="containerFiled"
                                                                                        [fieldId]="containerFiled.id+'#'+container.index"
                                                                                        [submitted]="submitted"
                                                                                        [yourTurn]="yourTurn"
                                                                                        (refreshFormEvent)="refreshForm2($event)"></app-combo-box>

                                                                                </ng-container>

                                                                                <ng-container
                                                                                    *ngIf="containerFiled.type=='FILE'">

                                                                                    <div class="row mb-4"
                                                                                        [hidden]="containerFiled.hidden">

                                                                                        <label
                                                                                            class="col-sm-2 col-form-label form-label">
                                                                                            {{containerFiled.label}}

                                                                                            <span class="text-danger"
                                                                                                *ngIf="containerFiled.required">
                                                                                                * </span>
                                                                                        </label>

                                                                                        <div class="col-sm-10">

                                                                                            <table
                                                                                                class="multiple-input-list table table-condensed table-renderer">
                                                                                                <tbody>
                                                                                                    <tr class="multiple-input-list__item"
                                                                                                        data-index="0">

                                                                                                        <td
                                                                                                            class="list-cell__environmental_exsits_approval_file">

                                                                                                            <div
                                                                                                                class="field-dynamicmodel-environmental_exsits_approval_file-0 form-group">

                                                                                                                <input
                                                                                                                    [ngClass]="myForm.get(field.id)?.invalid && submitted ? 'is-invalid':null"
                                                                                                                    formControlName="{{containerFiled.id}}#{{container.index}}"
                                                                                                                    [multiple]="containerFiled.multiSelect"
                                                                                                                    class="form-control"
                                                                                                                    type="file"
                                                                                                                    (change)="onUploadFile(containerFiled.id+'#'+container.index,$event,containerFiled.multiSelect!)"
                                                                                                                    [required]="containerFiled.required && getFiles(containerFiled.id+'#'+container.index).length==0">

                                                                                                                <p class="pt-1"
                                                                                                                    style="font-size: 13px !important;"
                                                                                                                    *ngIf="containerFiled?.description">
                                                                                                                    {{containerFiled?.description??""}}
                                                                                                                </p>

                                                                                                                <p class="pt-1 text-danger"
                                                                                                                    style="font-size: 13px !important;"
                                                                                                                    *ngIf="yourTurn && containerFiled?.approved == false">
                                                                                                                    {{containerFiled?.comment??""}}
                                                                                                                </p>



                                                                                                                <div
                                                                                                                    *ngIf="myForm.get(containerFiled.id+'#'+container.index)?.invalid && submitted">
                                                                                                                    <span
                                                                                                                        class="text-danger"
                                                                                                                        *ngIf="myForm.get(containerFiled.id+'#'+container.index)?.errors?.['required']">
                                                                                                                        حقل
                                                                                                                        اجباري
                                                                                                                        !
                                                                                                                    </span>
                                                                                                                </div>
                                                                                                            </div>



                                                                                                            <table
                                                                                                                class="table text-center my-3"
                                                                                                                *ngIf="getFiles(containerFiled.id+'#'+container.index).length>0">
                                                                                                                <thead
                                                                                                                    class="thead-light">
                                                                                                                    <tr>
                                                                                                                        <th>اسم
                                                                                                                            الملف
                                                                                                                        </th>
                                                                                                                        <th>حذف
                                                                                                                        </th>
                                                                                                                    </tr>
                                                                                                                </thead>

                                                                                                                <tbody>

                                                                                                                    <tr
                                                                                                                        *ngFor="let item of getFiles(containerFiled.id+'#'+container.index)">
                                                                                                                        <td>{{containerFiled.label}}
                                                                                                                        </td>
                                                                                                                        <td>
                                                                                                                            <i role="button"
                                                                                                                                (click)="deleteFile(item.id)"
                                                                                                                                class="fa-solid fa-trash text-danger"></i>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                </tbody>
                                                                                                            </table>

                                                                                                            <br>

                                                                                                        </td>
                                                                                                        <td
                                                                                                            class="list-cell__button">
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                </tbody>
                                                                                            </table>




                                                                                        </div>
                                                                                    </div>

                                                                                </ng-container>

                                                                                <ng-container
                                                                                    *ngIf="containerFiled.type=='TEXT_VIEW'">

                                                                                    <app-text-view
                                                                                    [formGroup]="myForm"
                                                                                    [errors]="getFormControlErrors(containerFiled.id+'#'+container.index)"
                                                                                    [isInvalid]="getFormControlValidation(containerFiled.id+'#'+container.index)"
                                                                                    [field]="containerFiled"
                                                                                    [value]="myForm.get(containerFiled.id+'#'+container.index)?.value"
                                                                                    [fieldId]="containerFiled.id+'#'+container.index"
                                                                                    [submitted]="submitted"
                                                                                    [yourTurn]="yourTurn"
                                                                                    (refreshFormEvent)="refreshForm2($event)"></app-text-view>


                                                                                </ng-container>

                                                                                <ng-container
                                                                                    *ngIf="containerFiled.type=='PREDEFINED_COMBO_BOX'">


                                                                                    <app-predefined-combo-box
                                                                                        [formGroup]="myForm"
                                                                                        [errors]="getFormControlErrors(containerFiled.id+'#'+container.index)"
                                                                                        [isInvalid]="getFormControlValidation(containerFiled.id+'#'+container.index)"
                                                                                        [field]="containerFiled"
                                                                                        [fieldId]="containerFiled.id+'#'+container.index"
                                                                                        [submitted]="submitted"
                                                                                        [yourTurn]="yourTurn"
                                                                                        (refreshFormEvent)="refreshForm2($event)"></app-predefined-combo-box>



                                                                                    <!-- <div class="row mb-4">
                                                                                        <label
                                                                                            class="col-sm-2 col-form-label form-label">
                                                                                            {{containerFiled.label}}
                                                                                            <span class="text-danger"
                                                                                                *ngIf="containerFiled.required && !field.hidden!">
                                                                                                * </span>
                                                                                        </label>

                                                                                        <div class="col-sm-10">
                                                                                            <select
                                                                                                [ngClass]="myForm.get(field.id)?.invalid && submitted ? 'is-invalid':null"
                                                                                                formControlName="{{containerFiled.id}}#{{container.index}}"
                                                                                                class="form-control"
                                                                                                [required]="containerFiled.required && !field.hidden!">
                                                                                                <option value="">يرجى
                                                                                                    الاختيار</option>
                                                                                                <option
                                                                                                    *ngFor="let item of containerFiled.options"
                                                                                                    value="{{item.key}}">
                                                                                                    {{item.label}}
                                                                                                </option>
                                                                                            </select>

                                                                                            <p class="pt-1"
                                                                                                style="font-size: 13px !important;"
                                                                                                *ngIf="containerFiled?.description">
                                                                                                {{containerFiled?.description??""}}
                                                                                            </p>

                                                                                            <p class="pt-1 text-danger"
                                                                                                style="font-size: 13px !important;"
                                                                                                *ngIf="yourTurn && containerFiled?.approved == false">
                                                                                                {{containerFiled?.comment??""}}
                                                                                            </p>

                                                                                            <div
                                                                                                *ngIf='myForm.get(containerFiled.id +"#" + container.index)?.invalid && submitted'>
                                                                                                <span
                                                                                                    class="text-danger"
                                                                                                    *ngIf='myForm.get(containerFiled.id +"#" + container.index)?.errors?.["required"]'>
                                                                                                    حقل اجباري !
                                                                                                </span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div> -->

                                                                                </ng-container>

                                                                            </ng-container>

                                                                            <hr
                                                                                *ngIf="GetContainerItems(field.id).length>1">

                                                                        </ng-container>


                                                                        <div class="col-12 text-center py-3"
                                                                            *ngIf="field.modifiable==true">
                                                                            <button id="submit-button"
                                                                                class="btn btn-primary"
                                                                                (click)="addContainerItems(field)">اضافة</button>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div *ngIf="field.designType=='TABLE'">


                                                        <table class="table text-center my-3">
                                                            <thead class="thead-light">

                                                                <tr>
                                                                    <th
                                                                        *ngFor="let containerTableHeader of field.fields">
                                                                        {{containerTableHeader.label}} </th>
                                                                </tr>

                                                            </thead>

                                                            <tbody>

                                                                <tr *ngFor="let containerTableBody of field.value">

                                                                    <td
                                                                        *ngFor="let containerTableBodyValue of containerTableBody">
                                                                        {{containerTableBodyValue.value}}</td>

                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </div>

                                                </div>

                                                <br>

                                            </ng-container>

                                        </ng-container>


                                        <br>
                                        <br>

                                        <p class="text-danger">
                                            (*) متطلبات إلزامية </p>
                                        <div class="d-flex justify-content-center">
                                            <!-- <button type="button" class="btn btn-ghost-secondary ms-4"
                                                data-hs-step-form-prev-options="{
                 &quot;targetSelector&quot;: &quot;#basicStepDetails&quot;
               }">
                                                <i class="bi-chevron-right small"></i>
                                                الشروط </button> -->

                                            <ng-container>
                                                <button (click)="Save()" id="submit-button"
                                                    class="btn btn-primary btn-lg">تقديم الطلب</button>
                                            </ng-container>

                                        </div>
                                    </form>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>

    </div>

</main>
<!-- 
<div class="modal fade flashModal" id="exampleModal"  tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-modal="true">
    <div class="modal-dialog modal-dialog-centered">
    
        <div class="modal-content">
        <div class="modal-header mx-auto">
                <img width="40" src="../../../assets/images/success.png" alt="success">
            </div>
            <div class="modal-body text-center text-black lead">
                {{message}}
            </div>
            <div class="modal-footer">
                <a href="/Investment/Dashboard" class="btn btn-secondary btn-sm m-auto">إغلاق</a>
            </div>
        </div>
    </div>
</div>

<button id="exampleModalBtn" type="button" class="btn btn-primary d-none" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Launch demo modal
</button> -->